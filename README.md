# Domain-Specific Language for Matrix and Vector Manipulation

## Overview

This project is an open-ended design assignment for the course *Programming Languages*, taught by **Prof. Sanjiva Prasad**. The goal is to build a **Domain-Specific Language (DSL)** that allows for high-level operations on vectors and matrices, supporting typical linear algebraic computations.

The assignment progresses through the full language design and implementation cycle:

1. **Lexical Analysis** (OCaml-Lex)
2. **Parsing and Grammar Design** (OCaml-Yacc)
3. **Abstract Syntax Tree (AST) Construction**
4. **Interpreter Implementation**

---

## Features of the DSL

The language is purpose-built for matrix and vector operations and includes the following:

### ✅ Data Types

* **Primitive types**:

  * `int`, `float`, `bool`
* **Compound types**:

  * `vector[n]`, `matrix[m][n]` (row-major format)

### ✅ Expressions & Operators

* **Scalars**:

  * Arithmetic: `+`, `-`, `*`, `/`
  * Comparisons: `=`, `!=`, `<`, `<=`, `>`, `>=`
  * Boolean: `&&`, `||`, `!`
* **Vectors**:

  * Construction: `[1, 2, 3]`
  * Operations: `+`, scalar `*`, dot product (`.`), `magnitude`, `dimension`, `angle`
* **Matrices**:

  * Construction: `[[1,2], [3,4]]`
  * Operations: `+`, scalar `*`, matrix multiplication (`*`), `transpose`, `determinant`

### ✅ Control Constructs

* **Assignment**: `x := expr`
* **Blocks**: `{ stmt1; stmt2; ... }`
* **Conditionals**: `if (cond) then stmt else stmt`
* **Loops**:

  * `while (cond) { ... }`
  * `for i = start to end { ... }`

### ✅ Input/Output

* `Input("filename")` – load vector/matrix from file
* `Input()` – read from stdin
* `Print(x)` – output variable

---

## Interpreter Implementation

The interpreter processes **well-typed Abstract Syntax Trees (ASTs)** generated by the parser. Key parts of the interpreter:

* `eval_expr`: evaluates expressions
* `eval_stmt`: executes statements
* Runtime environment: maintains current variable bindings

The interpreter gracefully handles:

* Type errors
* Runtime errors (e.g., out-of-bound accesses, mismatched dimensions)
* Syntax errors (from parser/lexer)

All new code introduced in this part is clearly marked and integrated with the earlier modules.

---

## Test Suite

The project includes:

### ✅ Correct Test Programs

* Transposing a matrix
* Inverting a matrix
* Determinant calculation
* Dot product of vectors
* Scalar multiplication
* Gaussian elimination (ambitious example)

### ❌ Incorrect Programs

* Ill-typed expressions
* Syntax errors
* Runtime failures (e.g., division by zero, shape mismatch)

These tests are essential to ensure robustness and correctness of the interpreter.

---



## Build & Run

### Requirements

* OCaml
* OCamlLex and OCamlYacc

### Compile

```bash
make
```

### Run Interpreter

```bash
./interpreter program.dsl
```

---

## Notes

* Grammar has been refined to eliminate all **reduce-reduce** and **shift-reduce** conflicts using precedence levels.
* Good error messages are provided at both parsing and runtime stages.
* Code is modular, readable, and thoroughly tested.

---

## Acknowledgements

* Designed under the guidance of **Prof. Sanjiva Prasad**
* Inspired by principles of type-safe DSLs and compiler construction

